# üß™ –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é Validator Performance System

## üìã –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞

–£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –≤—ã –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ `computechain/`:
```bash
cd /home/pc205/128/computechain
```

–£ –≤–∞—Å —Ç–µ–ø–µ—Ä—å –µ—Å—Ç—å 3 —Å–∫—Ä–∏–ø—Ç–∞:
- `start_node_a.sh` - –∑–∞–ø—É—Å–∫ –ø–µ—Ä–≤–∏—á–Ω–æ–π –Ω–æ–¥—ã
- `start_node_b.sh` - –∑–∞–ø—É—Å–∫ –≤—Ç–æ—Ä–∏—á–Ω–æ–π –Ω–æ–¥—ã
- `open_dashboard.sh` - –æ—Ç–∫—Ä—ã—Ç—å dashboard –≤ –±—Ä–∞—É–∑–µ—Ä–µ

---

## üöÄ –°—Ü–µ–Ω–∞—Ä–∏–π —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### –®–∞–≥ 1: –ó–∞–ø—É—Å–∫ Node A (Terminal 1)

```bash
# –û—á–∏—Å—Ç–∏—Ç—å —Å—Ç–∞—Ä—ã–µ –¥–∞–Ω–Ω—ã–µ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
./start_node_a.sh --clean

# –ò–ª–∏ –ø—Ä–æ—Å—Ç–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å
./start_node_a.sh
```

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:**
- –°–æ–∑–¥–∞—ë—Ç—Å—è genesis validator —Å 2000 CPC stake
- –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è faucet —Å balans'–æ–º
- –ù–æ–¥–∞ –Ω–∞—á–∏–Ω–∞–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å –±–ª–æ–∫–∏
- RPC –¥–æ—Å—Ç—É–ø–µ–Ω –Ω–∞ http://localhost:8000
- Dashboard –¥–æ—Å—Ç—É–ø–µ–Ω –Ω–∞ http://localhost:8000/

**–î–æ–∂–¥–∏—Ç–µ—Å—å:** –ù–µ—Å–∫–æ–ª—å–∫–æ –±–ª–æ–∫–æ–≤ (height > 5)

---

### –®–∞–≥ 2: –û—Ç–∫—Ä—ã—Ç—å Dashboard (Terminal 3)

```bash
./open_dashboard.sh
```

–ò–ª–∏ –≤—Ä—É—á–Ω—É—é –æ—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ:
```
http://localhost:8000/
```

**–ß—Ç–æ —É–≤–∏–¥–∏—Ç–µ:**
- 1 –∞–∫—Ç–∏–≤–Ω—ã–π –≤–∞–ª–∏–¥–∞—Ç–æ—Ä
- Performance Score: 100%
- –ë–ª–æ–∫–∏ —Å–æ–∑–¥–∞—é—Ç—Å—è —Ä–µ–≥—É–ª—è—Ä–Ω–æ
- Epoch transition –∫–∞–∂–¥—ã–µ 10 –±–ª–æ–∫–æ–≤

---

### –®–∞–≥ 3: –ó–∞–ø—É—Å–∫ Node B (Terminal 2)

```bash
./start_node_b.sh
```

**–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å:**
1. –°–∫—Ä–∏–ø—Ç –ø—Ä–æ–≤–µ—Ä–∏—Ç —á—Ç–æ Node A —Ä–∞–±–æ—Ç–∞–µ—Ç ‚úÖ
2. –°–ø—Ä–æ—Å–∏—Ç: "Create NEW validator for Node B? (y/n)"
3. –ù–∞–∂–º–∏—Ç–µ **Y** –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤–æ–≥–æ –≤–∞–ª–∏–¥–∞—Ç–æ—Ä–∞

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:**
- –ò–º–ø–æ—Ä—Ç faucet key –∏–∑ Node A
- –°–æ–∑–¥–∞–Ω–∏–µ alice key
- –û—Ç–ø—Ä–∞–≤–∫–∞ 3000 CPC alice'—É
- –°—Ç–µ–π–∫–∏–Ω–≥ 2000 CPC (alice —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –≤–∞–ª–∏–¥–∞—Ç–æ—Ä–æ–º)
- –≠–∫—Å–ø–æ—Ä—Ç –∫–ª—é—á–∞ –≤ Node B
- –ó–∞–ø—É—Å–∫ Node B —Å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ–º –∫ Node A

**–î–æ–∂–¥–∏—Ç–µ—Å—å:** Epoch transition (—Å–ª–µ–¥—É—é—â–∏–µ 10 –±–ª–æ–∫–æ–≤)

---

### –®–∞–≥ 4: –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≤ Dashboard

–û–±–Ω–æ–≤–∏—Ç–µ dashboard (–∏–ª–∏ –ø–æ–¥–æ–∂–¥–∏—Ç–µ 10 —Å–µ–∫):

**–ß—Ç–æ —É–≤–∏–¥–∏—Ç–µ:**
```
Active Validators: 2
Leaderboard:
  #1 Node A - Score: 100% - Power: 2000
  #2 Node B - Score: 100% - Power: 2000
```

---

## üß™ –¢–µ—Å—Ç 1: Missed Blocks Detection

### –î–µ–π—Å—Ç–≤–∏–µ: –û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Node B

–í Terminal 2 –Ω–∞–∂–º–∏—Ç–µ **Ctrl+C** —á—Ç–æ–±—ã –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Node B.

### –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:

–ß–µ—Ä–µ–∑ –Ω–µ—Å–∫–æ–ª—å–∫–æ –±–ª–æ–∫–æ–≤ –≤ Dashboard:
```
Validator Node B:
  Missed Blocks: 3, 4, 5... (—Ä–∞—Å—Ç—ë—Ç)
  Performance Score: –ø–∞–¥–∞–µ—Ç
  Status: Active ‚Üí Inactive (–ø–æ—Å–ª–µ 10 –ø—Ä–æ–ø—É—â–µ–Ω–Ω—ã—Ö)
```

–í –ª–æ–≥–∞—Ö Node A —É–≤–∏–¥–∏—Ç–µ:
```
‚ö†Ô∏è  Validator cpcvalcons1xxx missed block at height X (total consecutive: 5)
```

---

## üî• –¢–µ—Å—Ç 2: Jail Mechanism

### –£—Å–ª–æ–≤–∏–µ:
–í–∞–ª–∏–¥–∞—Ç–æ—Ä –ø—Ä–æ–ø—É—Å—Ç–∏–ª **10+ –±–ª–æ–∫–æ–≤** –ø–æ–¥—Ä—è–¥

### –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:

**–í Dashboard:**
```
Jailed Validators: 1
  - Node B validator
  - Blocks remaining: 100
  - Penalty: 5% stake slashed
  - Jail count: 1
```

**–í –ª–æ–≥–∞—Ö Node A:**
```
‚ö†Ô∏è  JAILED: Validator cpcvalcons1xxx
    Penalty: 100000000000000000000 (5%)
    Jail #1 until block XXX
    Remaining power: 1900000000000000000000
```

**Leaderboard:**
```
#1 Node A - Score: 100% - Active ‚úÖ
#2 Node B - Score: <75% - Jailed üîí
```

---

## üöÄ –¢–µ—Å—Ç 3: Validator Recovery

### –î–µ–π—Å—Ç–≤–∏–µ: –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ Node B

```bash
# –í Terminal 2
./start_node_b.sh
```

–°–∫—Ä–∏–ø—Ç —Å–ø—Ä–æ—Å–∏—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å –ª–∏ –Ω–æ–≤–æ–≥–æ –≤–∞–ª–∏–¥–∞—Ç–æ—Ä–∞ - –Ω–∞–∂–º–∏—Ç–µ **N** (–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ)

### –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:

Node B –ø–æ–¥–∫–ª—é—á–∏—Ç—Å—è –∏ –Ω–∞—á–Ω—ë—Ç —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é. –ù–æ –≤–∞–ª–∏–¥–∞—Ç–æ—Ä –æ—Å—Ç–∞–Ω–µ—Ç—Å—è **–≤ jail** –¥–æ –∫–æ–Ω—Ü–∞ —Å—Ä–æ–∫–∞ (100 –±–ª–æ–∫–æ–≤).

–ü–æ—Å–ª–µ –æ–∫–æ–Ω—á–∞–Ω–∏—è jail'–∞ (100 –±–ª–æ–∫–æ–≤):
- –í–∞–ª–∏–¥–∞—Ç–æ—Ä –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Å–≤–æ–±–æ–∂–¥–∞–µ—Ç—Å—è
- –ú–æ–∂–µ—Ç —Å–Ω–æ–≤–∞ —É—á–∞—Å—Ç–≤–æ–≤–∞—Ç—å –≤ epoch transition
- Performance score –Ω–∞—á–Ω—ë—Ç —Ä–∞—Å—Ç–∏ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –±–ª–æ–∫–æ–≤

---

## ‚ö° –¢–µ—Å—Ç 4: Ejection (Permanent Ban)

### –£—Å–ª–æ–≤–∏–µ:
–í–∞–ª–∏–¥–∞—Ç–æ—Ä –ø–æ–ª—É—á–∏–ª **3 jail'–∞**

### –ö–∞–∫ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ—Å—Ç–∏:
1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ Node B
2. –î–æ–∂–¥–∏—Ç–µ—Å—å epoch transition (–≤–æ–π–¥—ë—Ç –≤ active set)
3. –û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Node B - –ø–æ–ª—É—á–∏—Ç 1–π jail
4. –ü–æ–¥–æ–∂–¥–∏—Ç–µ 100 –±–ª–æ–∫–æ–≤ (–æ—Å–≤–æ–±–æ–¥–∏—Ç—Å—è)
5. –ó–∞–ø—É—Å—Ç–∏—Ç–µ Node B
6. –ü–æ–≤—Ç–æ—Ä–∏—Ç–µ –ø—É–Ω–∫—Ç—ã 2-5 –µ—â—ë 2 —Ä–∞–∑–∞

### –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç –ø–æ—Å–ª–µ 3–≥–æ jail'–∞:

**–í –ª–æ–≥–∞—Ö:**
```
‚ùå EJECTED: Validator cpcvalcons1xxx (too many jails: 3)
   Full slash applied, power = 0
```

**–í Dashboard:**
```
Validator Node B:
  Status: Ejected ‚ùå
  Power: 0
  Jail Count: 3
  Total Penalties: 300000000000000000000 (15%)
```

–í–∞–ª–∏–¥–∞—Ç–æ—Ä **–Ω–∞–≤—Å–µ–≥–¥–∞** –∏—Å–∫–ª—é—á—ë–Ω –∏–∑ —Å–µ—Ç–∏. –ù—É–∂–Ω–æ —Å–æ–∑–¥–∞–≤–∞—Ç—å –Ω–æ–≤–æ–≥–æ.

---

## üìä –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å —á–µ—Ä–µ–∑ API:
```bash
# –û–±—â–∏–π —Å—Ç–∞—Ç—É—Å
curl -s http://localhost:8000/status | python3 -m json.tool

# Leaderboard
curl -s http://localhost:8000/validators/leaderboard | python3 -m json.tool

# Jailed –≤–∞–ª–∏–¥–∞—Ç–æ—Ä—ã
curl -s http://localhost:8000/validators/jailed | python3 -m json.tool

# –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –≤–∞–ª–∏–¥–∞—Ç–æ—Ä
ADDR="cpcvalcons1..."
curl -s http://localhost:8000/validator/$ADDR/performance | python3 -m json.tool
```

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏:
```bash
# –ü–æ—Å–ª–µ–¥–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è
tail -f /tmp/node_test.log | grep -E "(Epoch|Validator|JAILED|EJECTED|missed)"
```

---

## üéØ –û–∂–∏–¥–∞–µ–º–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã

### ‚úÖ –ù–æ—Ä–º–∞–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞:
- –í–∞–ª–∏–¥–∞—Ç–æ—Ä—ã —Å uptime >90% –∏–º–µ—é—Ç score ~1.0
- Active set –≤—ã–±–∏—Ä–∞–µ—Ç—Å—è –ø–æ performance_score
- –ë–ª–æ–∫–∏ —Å–æ–∑–¥–∞—é—Ç—Å—è —Å—Ç–∞–±–∏–ª—å–Ω–æ –∫–∞–∂–¥—ã–µ 10 —Å–µ–∫—É–Ω–¥

### ‚ö†Ô∏è –ü—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö:
- Missed blocks –¥–µ—Ç–µ–∫—Ç–∏—Ä—É—é—Ç—Å—è —Å—Ä–∞–∑—É
- Jail –ø–æ—Å–ª–µ 10 –ø—Ä–æ–ø—É—â–µ–Ω–Ω—ã—Ö –±–ª–æ–∫–æ–≤ –ø–æ–¥—Ä—è–¥
- Slashing 5% stake –∑–∞ –∫–∞–∂–¥—ã–π jail
- Ejection –ø–æ—Å–ª–µ 3 jails

### üìà Performance Score —Ñ–æ—Ä–º—É–ª–∞:
```
score = 0.6 √ó uptime + 0.2 √ó stake_ratio + 0.2 √ó (1 - penalty_ratio)

–≥–¥–µ:
  uptime = blocks_proposed / blocks_expected
  stake_ratio = validator_power / total_network_power
  penalty_ratio = total_penalties / validator_power (max 0.5)
```

---

## üêõ Troubleshooting

### Node A –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –Ω–µ—Ç —Å—Ç–∞—Ä—ã—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
ps aux | grep run_node.py
kill -9 <PID>

# –û—á–∏—Å—Ç–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ –∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ –∑–∞–Ω–æ–≤–æ
./start_node_a.sh --clean
```

### Node B –Ω–µ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ Node A —Ä–∞–±–æ—Ç–∞–µ—Ç
curl http://localhost:8000/status

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ P2P –ø–æ—Ä—Ç
netstat -tlnp | grep 9000
```

### Dashboard –Ω–µ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ node —Ä–∞–±–æ—Ç–∞–µ—Ç
curl http://localhost:8000/

# –ï—Å–ª–∏ –Ω–µ—Ç - –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ node
```

### –í–∞–ª–∏–¥–∞—Ç–æ—Ä –Ω–µ –ø–æ—è–≤–ª—è–µ—Ç—Å—è –≤ active set
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ stake >= 1000 CPC
- –ü–æ–¥–æ–∂–¥–∏—Ç–µ epoch transition (10 –±–ª–æ–∫–æ–≤)
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –Ω–µ –≤ jail

---

## üìù –ó–∞–º–µ—Ç–∫–∏

- **Epoch length**: 10 –±–ª–æ–∫–æ–≤ (–Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è –≤ params.py)
- **Block time**: 10 —Å–µ–∫—É–Ω–¥
- **Max validators**: 5 (devnet)
- **Min stake**: 1000 CPC
- **Jail duration**: 100 –±–ª–æ–∫–æ–≤ (~16 –º–∏–Ω—É—Ç)
- **Slashing rate**: 5% per jail

---

## üé¨ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç (–≤—Å–µ –≤ –æ–¥–Ω–æ–º)

```bash
# Terminal 1: –ó–∞–ø—É—Å—Ç–∏—Ç—å Node A
cd /home/pc205/128/computechain
./start_node_a.sh --clean

# –î–æ–∂–¥–∞—Ç—å—Å—è 5+ –±–ª–æ–∫–æ–≤

# Terminal 2: –ó–∞–ø—É—Å—Ç–∏—Ç—å Node B
./start_node_b.sh
# –í—ã–±—Ä–∞—Ç—å Y –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤–æ–≥–æ –≤–∞–ª–∏–¥–∞—Ç–æ—Ä–∞

# Terminal 3: –û—Ç–∫—Ä—ã—Ç—å dashboard
./open_dashboard.sh

# –î–∞–ª–µ–µ –º–æ–∂–Ω–æ –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å Node B –∏ —Å–º–æ—Ç—Ä–µ—Ç—å –∫–∞–∫ —Å–∏—Å—Ç–µ–º–∞ —Ä–µ–∞–≥–∏—Ä—É–µ—Ç!
```

---

**–ì–æ—Ç–æ–≤–æ!** –¢–µ–ø–µ—Ä—å —É –≤–∞—Å –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–±–æ—á–∞—è —Ç–µ—Å—Ç–æ–≤–∞—è —Å—Ä–µ–¥–∞ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ Validator Performance & Slashing System. üéâ
